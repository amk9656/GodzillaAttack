<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>Godzilla Attack</title>
        <link rel="stylesheet" href="styles/normalize.css">
        <link rel="stylesheet" href="styles/style.css">
		<script src="scripts/Godzilla.js" type="text/javascript"></script>
		<script src="scripts/Drawing.js" type="text/javascript"></script>
		<script src="scripts/Levels.js" type="text/javascript"></script>
		<script src="scripts/Enemies.js" type="text/javascript"></script>
		<script src="scripts/UI.js" type="text/javascript"></script>
		<script src="scripts/Audio.js" type="text/javascript"></script>
		<script src="scripts/utils.js" type="text/javascript"></script>
		<script>
		"use strict";
		
		window.addEventListener("load",init);
		
		var CANVAS_WIDTH = 640,
			CANVAS_HEIGHT = 480;

		var ctx, threading = [];
		var spawnTime = 0;
		var godzilla,
			helicopter = [],
			level,
			audioChannels = [],				
			ui;				

		function init () {
			var canvasElement = document.querySelector("#canvas");
			canvasElement.width = CANVAS_WIDTH;
			canvasElement.height = CANVAS_HEIGHT;
			ctx = canvasElement.getContext("2d");
			audioChannels.push(new AudioEffect("bgm", true, true, false));
			ui = new UI();

			AnimateUI();
		}

		function initGame () {
			godzilla = new Godzilla();
			helicopter.push(new Helicopter());
			level = new Level("3x3");
			audioChannels.push(new AudioEffect("bgm", true, true, false));

			AnimateGame();
		}

		function update(deltaTime)
		{
			if(helicopter.length < 3)
			{
				spawnTime += deltaTime;
			}
			helicopter.forEach(function(heli) {
				heli.update(deltaTime);
			});
			helicopter = helicopter.filter(function(heli) {
				return heli.active;
			});
		}
		</script>
	</head>
	<body>
		<header id="game_header" class="shadow">
			Godzilla Attack
		</header>
		<section id="game" class="shadow">
			<canvas id="canvas"></canvas>
		</section>
		<footer id="footer">
        	Andrew Kaufman & Nelson Liu; New Media Web Tech II Spring 2012; Project I
        </footer>
	</body>
</html>
